<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>World of Words - Bingo</title>

  <style>
    :root{
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);

      --ui-pad-x: clamp(10px, 2vw, 20px);
      --ui-pad-y: clamp(10px, 2vh, 20px);
      --gap: clamp(10px, 2vw, 24px);

      --pause-w: clamp(120px, 18vw, 190px);
      --pause-h: clamp(40px, 6vw, 62px);

      --title-h: clamp(44px, 6.4vw, 86px);
      --hp-h: clamp(34px, 5vw, 62px);

      /* Board sizes (main bigger, example smaller) */
      --tile: clamp(76px, 8.6vw, 128px);
      --ex-tile: clamp(28px, 3.2vw, 46px);

      --grid-gap: clamp(10px, 1.2vw, 16px);
      --ex-gap: clamp(8px, 1vw, 12px);

      /* Answers column width (smaller than before) */
      --ans-w: clamp(220px, 20vw, 320px);
    }

    html, body{
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #000;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
    }

    img{
      image-rendering: pixelated;
      image-rendering: crisp-edges;
      -ms-interpolation-mode: nearest-neighbor;
      -webkit-user-drag: none;
      user-select: none;
    }

    .stage{
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    .bg{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: translateZ(0);
    }

    .ui{
      position: absolute;
      inset: 0;
      padding:
        calc(var(--ui-pad-y) + var(--safe-top))
        calc(var(--ui-pad-x) + var(--safe-right))
        calc(var(--ui-pad-y) + var(--safe-bottom))
        calc(var(--ui-pad-x) + var(--safe-left));
      pointer-events: none;

      display: grid;
      grid-template-rows: auto 1fr auto; /* topbar / main / timer */
      row-gap: var(--gap);
    }

    /* clickable areas */
    .clickable{ pointer-events: auto; }

    /* Shared button base */
    .ui-btn{
      border: 0;
      padding: 0;
      background: transparent;
      cursor: pointer;
      position: relative;
      display: inline-block;
      transition: transform 120ms ease;
      touch-action: manipulation;
      transform: translateZ(0);
    }
    .ui-btn:active{ transform: scale(0.98); }
    @media (hover:hover) and (pointer:fine){
      .ui-btn:hover{ transform: scale(1.05); }
    }

    .ui-btn .bg-img{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: fill;
    }
    .ui-btn .label-img{
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: auto;
      height: 48%;
      max-width: 82%;
    }

    /* Top bar */
    .topbar{
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: start;
      column-gap: var(--gap);
    }

    .pause-btn{
      width: var(--pause-w);
      height: var(--pause-h);
    }

    .title{
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    .title img{
      height: var(--title-h);
      width: auto;
      max-width: 92vw;
    }

    .hp{
      display: flex;
      justify-content: flex-end;
      gap: clamp(4px, 0.8vw, 10px);
      padding-top: clamp(2px, 0.3vw, 8px);
    }
    .hp img{
      height: var(--hp-h);
      width: auto;
    }

    /* ===== Main layout (center board) ===== */
    .play-layout{
      display: grid;
      grid-template-columns: 1fr auto 1fr; /* main board stays center */
      align-items: center;
      justify-items: center;
      column-gap: var(--gap);
      min-height: 0; /* avoid overflow weirdness */
    }

    .panel-example{ justify-self: end; }
    .panel-main{ justify-self: center; }
    .panel-answers{ justify-self: start; width: min(100%, var(--ans-w)); }

    /* ===== Example board ===== */
    #exampleBoard.ex-grid{
      display: grid;
      grid-template-columns: repeat(var(--grid-size), var(--ex-tile));
      gap: var(--ex-gap);
      justify-content: center;
      align-content: center;
    }

    .ex-tile{
      width: var(--ex-tile);
      height: var(--ex-tile);
      display: block;
    }

    /* ===== Main board ===== */
    #mainBoard.main-grid{
      display: grid;
      grid-template-columns: repeat(var(--grid-size), var(--tile));
      gap: var(--grid-gap);
      justify-content: center;
      align-content: center;
    }

    .tile{
      position: relative;
      width: var(--tile);
      height: var(--tile);
      padding: 0;
      border: 0;
      background: transparent;
      cursor: pointer;
      pointer-events: auto;
      transition: transform 120ms ease;
      touch-action: manipulation;
      transform: translateZ(0);
    }
    .tile:active{ transform: scale(0.98); }
    @media (hover:hover) and (pointer:fine){
      .tile:hover{ transform: scale(1.04); }
    }

    .tile img{
      width: 100%;
      height: 100%;
      display: block;
      object-fit: contain;
    }

    /* bigger text + allow line breaks */
    .tile .txt{
      position: absolute;
      inset: 10%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      text-align: center;
      font-weight: 800;
      color: rgba(255,255,255,0.92);
      text-shadow:
        0 2px 0 rgba(0,0,0,0.6),
        0 0 6px rgba(0,0,0,0.35);

      font-size: clamp(14px, 1.55vw, 22px);
      line-height: 1.15;

      white-space: normal;
      word-break: break-word;
      overflow: hidden;
      pointer-events: none;
    }

    .tile .txt .sub{
      display: block;
      margin-top: 0.25em;
      font-size: 0.85em;
      opacity: 0.95;
      font-weight: 700;
    }

    /* ===== Answers ===== */
    #answers.answers-grid{
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: clamp(10px, 1.2vw, 14px);
      width: 100%;
      align-content: center;
      justify-content: center;
    }

    .ans-btn{
      width: 100%;
      aspect-ratio: 2.4 / 1;
    }

    .ans-btn .label{
      position: absolute;
      inset: 14% 10%;
      display: flex;
      align-items: center;
      justify-content: center;

      text-align: center;
      font-weight: 900;
      color: rgba(255,255,255,0.95);
      text-shadow:
        0 2px 0 rgba(0,0,0,0.65),
        0 0 6px rgba(0,0,0,0.35);

      font-size: clamp(14px, 1.35vw, 18px);
      line-height: 1.15;

      white-space: normal;
      word-break: break-word;
      overflow: hidden;
      pointer-events: none;
    }

    .ans-btn[disabled]{
      cursor: default;
      opacity: 0.55;
      filter: grayscale(0.35);
      transform: none !important;
    }

    /* ===== Animations (next-step polish) ===== */
    @keyframes tileFlash {
      0%   { filter: brightness(1); }
      50%  { filter: brightness(1.8); }
      100% { filter: brightness(1); }
    }

    @keyframes ansShake {
      0%   { transform: translateX(0); }
      25%  { transform: translateX(-4px); }
      50%  { transform: translateX(4px); }
      75%  { transform: translateX(-3px); }
      100% { transform: translateX(0); }
    }

    @keyframes ansPop {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.06); }
      100% { transform: scale(1); }
    }

    @keyframes wrongFlash {
      0%   { filter: brightness(1) saturate(1); }
      50%  { filter: brightness(1.25) saturate(1.4); }
      100% { filter: brightness(1) saturate(1); }
    }

    .tile.flash img{
      animation: tileFlash 220ms steps(2, end) 1;
    }

    .ans-btn.is-correct{
      animation: ansPop 180ms ease-out 1;
    }

    .ans-btn.is-wrong{
      animation: ansShake 260ms steps(2, end) 1;
    }
    .ans-btn.is-wrong .bg-img{
      animation: wrongFlash 260ms steps(2, end) 1;
    }

    /* ===== Timer (text becomes black from the RIGHT) ===== */
    .timer-bar{
      display: grid;
      justify-items: center;
      padding-bottom: max(10px, var(--safe-bottom));
      pointer-events: none;
    }

    .timer-wrap{
      position: relative;
      height: clamp(34px, 6vh, 52px);
    }

    .timer-img{
      height: 100%;
      width: auto;
      display: block;
    }

    .timer-mask{
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      width: 0%;
      overflow: hidden;
    }
    .timer-mask .timer-img{
      position: absolute;
      top: 0;
      right: 0;
    }

    /* Overlay */
    .overlay{
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: none;
      align-items: center;
      justify-content: center;
      pointer-events: auto;
      z-index: 50;
    }

    .overlay.show{ display: flex; }

    .overlay .card{
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 18px;
      padding: 18px 16px;
      width: min(92vw, 420px);
      text-align: center;
      color: #fff;
    }

    .overlay .card h2{
      margin: 0 0 10px 0;
      font-size: 20px;
      letter-spacing: 0.5px;
    }

    .overlay .row{
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .overlay .mini{
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.2);
      color: #fff;
      padding: 10px 12px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 800;
    }

    /* ===== Responsive: stack vertically ===== */
    @media (max-width: 900px){
      :root{
        --tile: clamp(72px, 18vw, 124px);
        --ex-tile: clamp(26px, 7.2vw, 44px);
        --ans-w: 100%;
      }

      .play-layout{
        grid-template-columns: 1fr;
        row-gap: var(--gap);
      }

      .panel-example, .panel-main, .panel-answers{
        justify-self: center;
        width: 100%;
        display: grid;
        justify-items: center;
      }

      #answers.answers-grid{
        max-width: 560px;
      }
    }

    @media (max-width: 520px){
      #answers.answers-grid{
        grid-template-columns: 1fr;
        max-width: 420px;
      }
    }
  </style>
</head>

<body>
  <div class="stage">
    <img class="bg" src="assets/world_of_words_game_Background_For_Desktop.png" alt="" />

    <div class="ui" aria-label="Bingo gameplay">
      <!-- Top bar -->
      <div class="topbar">
        <button class="ui-btn pause-btn clickable" id="pauseBtn" aria-label="Pause">
          <img class="bg-img" src="assets/Button_Pause.png" alt="" />
          <img class="label-img" src="assets/PAUSE.png" alt="PAUSE" />
        </button>

        <div class="title">
          <img src="assets/Bingo_Title.png" alt="BINGO" />
        </div>

        <div class="hp" id="hp" aria-label="HP"></div>
      </div>

      <!-- Main layout -->
      <div class="play-layout">
        <section class="panel panel-example">
          <div id="exampleBoard" class="ex-grid" aria-label="Pattern preview"></div>
        </section>

        <section class="panel panel-main">
          <div id="mainBoard" class="main-grid" aria-label="Bingo board"></div>
        </section>

        <section class="panel panel-answers">
          <div id="answers" class="answers-grid" aria-label="Answer choices"></div>
        </section>
      </div>

      <!-- Timer bottom (black covers from RIGHT) -->
      <div class="timer-bar">
        <div class="timer-wrap">
          <img class="timer-img" src="assets/TIMEISRUNNINGOUT_Red.png" alt="" onerror="this.onerror=null;this.src='assets/TIMEISRUNNINGOUT_White.png';" />
          <div id="timerMask" class="timer-mask">
            <img class="timer-img" src="assets/TIMEISRUNNINGOUT_Black.png" alt="" />
          </div>
        </div>
      </div>

      <!-- Overlays -->
      <div class="overlay" id="overlay" aria-hidden="true">
        <div class="card">
          <h2 id="overlayTitle">Paused</h2>
          <div class="row">
            <button class="mini" id="resumeBtn">Resume</button>
            <button class="mini" id="backBtn">Back</button>
            <button class="mini" id="retryBtn">Retry</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- vocab sources (JA<->KR, FR/ES<->EN) -->
  <script src="vocab.js"></script>
  <script src="vocab-fr.js"></script>
  <script src="vocab-es.js"></script>

  <!-- gameplay -->
  <script src="bingo.js"></script>
</body>
</html>
